import{_ as g,o as n,c as d,a as $,d as t,F as u,e as _,f as b,t as o,g as C,v as I}from"./index-7e242311.js";const{VITE_API_URL:l,VITE_API_PATH:c}={VITE_API_URL:"https://vue3-course-api.hexschool.io/v2",VITE_API_PATH:"rena",BASE_URL:"/VueW6-2",MODE:"production",DEV:!1,PROD:!0},m={data(){return{cart:{}}},methods:{getCarts(){this.$http.get(`${l}/api/${c}/cart`).then(e=>{console.log("購物車:",e),this.cart=e.data.data}).catch(e=>{console.log(e)})},updateCartItem(e){const r={product_id:e.product.id,qty:e.qty};this.$http.put(`${l}/api/${c}/cart/${e.id}`,{data:r}).then(h=>{this.cart=h.data.data,this.getCarts()})},deleteItem(e){this.$http.delete(`${l}/api/${c}/cart/${e.id}`).then(r=>{this.getCarts()})},clearCart(){this.$http.delete(`${l}/api/${c}/carts`).then(e=>{this.getCarts()})}},mounted(){this.getCarts()}},V={class:"table align-middle"},v=t("thead",null,[t("tr",null,[t("th"),t("th",null,"品名"),t("th",{style:{width:"150px"}},"數量/單位"),t("th",null,"小計")])],-1),y=["onClick","disabled"],f={class:"input-group input-group-sm"},x={class:"input-group mb-3"},E=["onUpdate:modelValue","disabled","onChange"],k=["value"],A={class:"input-group-text",id:"basic-addon2"},P={class:"text-end"},T=t("td",{colspan:"3",class:"text-end"},"總計",-1),D={class:"text-end"};function U(e,r,h,q,i,p){return n(),d(u,null,[$(" 購物車 "),t("table",V,[v,t("tbody",null,[i.cart.carts?(n(!0),d(u,{key:0},_(i.cart.carts,s=>(n(),d("tr",{key:s.id},[t("td",null,[t("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:a=>p.deleteItem(s),disabled:s.id===e.loadingItem}," x ",8,y)]),t("td",null,o(s.product.title)+" ",1),t("td",null,[t("div",f,[t("div",x,[C(t("select",{name:"",id:"",class:"form-select","onUpdate:modelValue":a=>s.qty=a,disabled:s.id===e.loadingItem,onChange:a=>p.updateCartItem(s)},[(n(),d(u,null,_(20,a=>t("option",{value:a,key:`${a}122`},o(a),9,k)),64))],40,E),[[I,s.qty]]),t("span",A,o(s.product.unit),1)])])]),t("td",P,"$ "+o(s.total),1)]))),128)):b("",!0)]),t("tfoot",null,[t("tr",null,[T,t("td",D,"$ "+o(i.cart.total),1)])])])],64)}const L=g(m,[["render",U]]);export{L as default};
